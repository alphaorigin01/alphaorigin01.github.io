(function(){"use strict";var e;e=angular.module("Athlete",["AthleteService","BTCService","PubNubService"]),e.controller("AthleteMetricsController",["$scope","$element","Athlete","BTCrate","PubNub",function(e,t,r,n,i){var l;return e.athlete=r,e.balanceInBTC=r.accountCredit,e.balanceInUSD=function(){return r.accountBalance/n()},l=function(){return $("#messages > .history").scrollTop($("#messages > .history")[0].scrollHeight)},$(".dial").knob(),e.$on("AthleteService : Set Athlete",function(e,t){return $(".lean_body_mass").find(".dial").val(r.lbm).trigger("change"),$(".fat_free_mass_index").find(".dial").val(r.ffmi).trigger("change")}),e.$on("Context Switch",function(t,r){return e.visibleAthleteMetricsAside=_.contains(["Search","Editor"],r),e.visibleAccount=_.contains(["Athlete Profile"],r),e.visibleAthleteMetrics=_.contains(["Athlete Profile"],r)}),e.generateInvitation=function(){return i("AthleteService : New Invitation",{athlete:r._id})},e.$on("AthleteService : Invitation Generated",function(t,n){return e.$evalAsync(function(){return n.athlete===r._id?e.invitationCode=n._id.substring(11):void 0})}),e.savePassword=function(){return null!=e.newPassword&&""!==e.newPassword?r.password=e.newPassword:void 0},e.$on("AthleteService : Set Athlete Complete",function(){return e.$evalAsync(function(){return e.newPassword=""})})}]),e.directive("athleteMetricsSection",function(){return{restrict:"E",templateUrl:"assets/templates/AthleteMetrics.html",controller:"AthleteMetricsController",scope:!0,replace:!0}}),e.directive("athleteMetricsAside",function(){return{restrict:"E",templateUrl:"assets/templates/AthleteMetricsAside.html",controller:"AthleteMetricsController",scope:!0,replace:!0}}),e.directive("account",function(){return{restrict:"E",templateUrl:"assets/templates/Account.html",controller:"AthleteMetricsController",scope:!0,replace:!0}})}).call(this);