(function(){"use strict";var e;e=angular.module("NewMember",["AthleteService","PubNubService"]),e.controller("NewMemberController",["$scope","$rootScope","$timeout","Athlete","PubNub",function(e,n,t,i,r){return window.NewMember=e,e.athlete=i,e.$on("Waiting for Server",function(){return e.spin=!0}),e.$on("Server Responded",function(){return e.spin=!1}),e.$on("Server : Online",function(){return e.$evalAsync(function(){return null==i._rev?e.visibleNewMember=!0:void 0})}),e.$on("Context Switch",function(){return e.visibleNewMember=!1}),e.$watch("username",function(){return null!=e.username&&""!==e.username?r("AthleteService : Check Athlete ID",e.username):(e.usernameValid=!1,e.usernameInvalid=!1)}),e.$watch("password",function(){return e.passwordValid=null!=e.password&&""!==e.password&&e.password.length>5?!0:!1}),e.$watch("invitation",function(){return null!=e.invitation&&""!==e.invitation?r("AthleteService : Check Invitation",e.invitation):(e.invitationValid=!1,e.invitationInvalid=!1)}),e.$on("AthleteService : Athlete ID Available",function(n,t){return e.username===t?e.$evalAsync(function(){return e.usernameValid=!0,e.usernameInvalid=!1}):void 0}),e.$on("AthleteService : Athlete ID Unavailable",function(n,t){return e.username===t?e.$evalAsync(function(){return e.usernameValid=!1,e.usernameInvalid=!0}):void 0}),e.$on("AthleteService : Invitation Is Valid",function(n,t){return e.invitation===t?e.$evalAsync(function(){return e.invitationValid=!0,e.invitationInvalid=!1}):void 0}),e.$on("AthleteService : Invitation Is Invalid",function(n,t){return e.invitation===t?e.$evalAsync(function(){return e.invitationValid=!1,e.invitationInvalid=!0}):void 0}),e.buttonStatus=function(){return null==e.username||""===e.username?"Select A Username":e.usernameInvalid?"Username Already Taken":e.passwordValid?null==e.invitation||""===e.invitation?"Enter your invitation code":e.invitationInvalid?"Invitation code is invalid":null==i.height||0===i.height?"Enter your height":null==i.weight||0===i.weight?"Enter your weight":null==i.bodyFat||0===i.bodyFat?"Enter your bodyfat":"Request Membership":"Enter a valid password"},e.requestMembership=function(){return"Request Membership"===e.buttonStatus()?(i._id="athlete_"+e.username,i.invitation=e.invitation,i.password=e.password,r("AthleteService : New Athlete",i),n.$broadcast("Waiting for Server")):void 0}}]),e.directive("newMemberSection",function(){return{restrict:"E",templateUrl:"assets/templates/NewMember.html",controller:"NewMemberController",scope:!0,replace:!0}})}).call(this);