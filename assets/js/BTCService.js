// Generated by CoffeeScript 1.9.2
(function() {
  'use strict';
  var BTCService;

  BTCService = angular.module('BTCService', ['PubNubService']);


  /*                        Service */

  BTCService.factory('BTCrate', [
    '$http', '$interval', '$rootScope', 'PubNub', function($http, $interval, $rootScope, PubNub) {
      var rate;
      rate = 0;
      $rootScope.$on('BTCService : Update BTCrate', function(e, data) {
        return $rootScope.$evalAsync(function() {
          return rate = 1 / data.amount;
        });
      });
      $rootScope.$on('PubNubService : Connected', function() {
        return PubNub('Server : Get BTCrate', {});
      });
      window.BTCService = function() {
        return rate;
      };
      return function() {
        return rate;
      };
    }
  ]);

}).call(this);
