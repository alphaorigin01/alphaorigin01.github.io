(function(){"use strict";this.onmessage=function(t){var a,i,n,r,e,o,l,s,u,v,f,d,c,g,h,M,m,b,p,y,w,x,D,E;for(i=t.data,n=Math.log(2)/i.halfLife,e=function(t,a){return t*i.bioavailability*Math.pow(Math.E,-(a*n))},m=function(t,a){return n*e(t,a)},f=[],h=0,c=0,s=l=0,b=i.duration-i.interval,p=i.interval;p>0?b>=l:l>=b;s=l+=p)c+=m(100,s),s>0&&(h+=m(100,s));for(a=.5*(h+c),r=i.activeTarget/a*100,h=0,c=0,s=u=0,y=i.duration-i.interval,w=i.interval;w>0?y>=u:u>=y;s=u+=w)c+=m(r,s),s>0&&(h+=m(r,s));for(d=c/m(r,0)*r,g=3*i.density,d>g&&(d=g),s=v=0,x=i.duration-i.interval,D=i.interval;D>0?x>=v:v>=x;s=v+=D)for(E=24*s,M=1,o=E;M>=1;)M=0===s?m(d,(o-E)/24):m(r,(o-E)/24),f[o]=null!=f[o]?f[o]+M:M,o+=1;return c=f[24*(i.duration-i.interval)],h=f[24*i.duration],postMessage({levels:f,min:h,max:c,avg:.5*(h+c),dose:r,loadingDose:d}),close()}}).call(this);