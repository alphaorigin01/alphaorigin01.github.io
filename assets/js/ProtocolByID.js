// Generated by CoffeeScript 1.9.2
(function() {
  'use strict';
  var app;

  app = angular.module('ProtocolByID', []);


  /*                      Controllers */

  app.controller('ProtocolByIDController', [
    '$scope', '$rootScope', 'PubNub', function($scope, $rootScope, PubNub) {
      $scope.visibleSearch = false;
      $scope.$on('Context Switch', function(e, context) {
        return $scope.visibleSearch = _.contains(['Search'], context);
      });
      return $scope.searchProtocolByID = function() {
        return PubNub('ProtocolService : Search', {
          q: 'id:' + 'protocol_' + ($scope.protocolByID.startsWith('X-') ? $scope.protocolByID.substring(2) : $scope.protocolByID)
        });
      };
    }
  ]);


  /*                      Directives */

  app.directive('protocolById', function() {
    return {
      restrict: 'E',
      templateUrl: 'assets/templates/ProtocolByID.html',
      controller: 'ProtocolByIDController',
      replace: true
    };
  });

}).call(this);
